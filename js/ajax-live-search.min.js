/**
 * created by : codeman.in team
 */
var AjaxLiveSearch=function(e,t,a){"use strict";var l=new XMLHttpRequest,n=(t.outerWidth,t.innerWidth-2),i=1,r=0,d=0,s=0,o=[],c="",g=[],u={ajaxUrl:"",inputId:"",inputLength:2,itemsPerPage:5,inputValue:"",coloumnHead:"",fields:"",data:""};return{init:function(t,a){c=a,i=1,r=0,d=0,s=0,u.data=[],g=[],o=[];for(var n in t)u.hasOwnProperty(n)&&(u[n]=t[n]);u.fields=u.fields.replace(/^\s*,*\s*/,"").replace(/\s*,*\s*$/,"").replace(/\s*,\s*/,","),u.coloumnHead=u.coloumnHead.replace(/^\s*,*\s*/,"").replace(/\s*,*\s*$/,"").replace(/\s*,\s*/,","),e.getElementById(u.inputId).value.trim().length>=u.inputLength?void 0===u.data||""==u.data?void 0===u.ajaxUrl||""==u.ajaxUrl?console.error("Ajax URL is missing."):function(t){l.readyState&&l.abort();e.getElementById(u.inputId).classList.add("input-loader"),l.open("GET",u.ajaxUrl,!0),l.onload=function(a){4===l.readyState&&(200===l.status?(t(JSON.parse(this.responseText)),e.getElementById(u.inputId).classList.remove("input-loader")):(console.error(xhr.statusText),e.getElementById(u.inputId).classList.remove("input-loader")))},l.onerror=function(t){console.error(xhr.statusText),e.getElementById(u.inputId).classList.remove("input-loader")},l.send(null)}(f):"object"==typeof u.data&&Object.keys(u.data).length>=1&&(!function(t){var a=[],l=e.getElementById(u.inputId).value;for(var n in t)for(var i in t[n]){var r="^"+l,d=new RegExp(r,"i"),s=u.fields.match(new RegExp("(?:^|,)"+i+"(?:,|$)"));if(s&&t[n][i].match(d)){a.push(t[n]);break}}u.data=a}(u.data),f(u.data)):(l.readyState&&(l.abort(),e.getElementById(u.inputId).classList.remove("input-loader")),e.getElementById("als-data")&&v(e.getElementById("als-data")))}};function f(e){u.data=e,r=Object.keys(u.data).length,d=Math.ceil(r/u.itemsPerPage),s=(i-1)*u.itemsPerPage,p(u.data)}function p(a){if(void 0!==u.fields&&""!=u.fields){var l='<div id="als-data">';if(l+='<div id="als-close-btn" title="close"></div>',l+='<div id="als-table"><table border="0">',void 0!==u.coloumnHead&&""!=u.coloumnHead){var f=u.coloumnHead.split(",");l+="<tr>";for(var y in f)l+='<th id="als-th">'+f[y]+"</th>";l+="</tr>"}for(var I=r<u.itemsPerPage?r:s+u.itemsPerPage,h=s;h<I;h++)if(h in a){var E="row"+h;g[E]=a[h],l+='<tr class="als-row" id="'+E+'">';var B=u.fields.split(",");for(var b in B)B[b.trim()]in a[h]&&(o.push(B[b]),l+='<td align="left">'+a[h][B[b]]+"</td>");l+="</tr>"}if(o.length<1){if(Object.keys(g).length>0)return void console.error("fields value doesnot match any field name from json data");l+='<tr><td colspan="'+(void 0===f?0:f.length)+'" align="left" class="no-record">No Record Found</td></tr>'}if(l+="</table></div>",r>u.itemsPerPage)l+='<div class="als-paging" id="als-paging"><div id="als-cp" class="als-align-center-paginng"><div id="als-la" class="'+(i>1?"als-left-arrow-dark":"als-left-arrow-light")+' als-p-lr" rel="left"></div>',l+='<div class="als-page" id="als-page"> '+i+" / "+d+' </div><div id="als-ra" class="'+(i==d?"als-right-arrow-light":"als-right-arrow-dark")+' als-p-lr" rel="right"></div>',l+="</div></div></div>";!function(a){e.getElementById("als-data")&&v(e.getElementById("als-data"));l=e.getElementById(u.inputId),o=a,f=e.createElement("div"),f.innerHTML=o.trim(),r=f.firstChild,l.parentNode.insertBefore(r,l.nextSibling),function(){var t=e.getElementById(u.inputId).getBoundingClientRect().left,a=e.getElementById(u.inputId).offsetLeft,l=parseInt(e.getElementById(u.inputId).offsetTop)+parseInt(e.getElementById(u.inputId).offsetHeight),i=e.getElementById("als-table").offsetWidth;m(e.getElementById("als-data"),{position:"absolute",top:l+"px"});var r="",d="";if(!(null!=r&&""!=r||null!=d&&""!=d)){var s=n-20>i?null:n-20,o=t+(i=null==s?i:s)-(n-20);o>0&&n-20>t&&(a-=o),m(e.getElementById("als-data"),{left:a+"px",right:null}),m(e.getElementById("als-data"),{width:s+"px"})}}(),function(){try{return t.self!==t.top}catch(e){return!1}}()&&(e.getElementById("als-close-btn").style.display="block");var l,r;var o,f;(function(){for(var t=e.getElementsByClassName("als-row"),a=0;a<t.length;a++)t[a].addEventListener("click",function(){var t=this.getAttribute("id"),a=g[t][u.inputValue];""!=u.inputValue&&void 0!==a?void 0!==a&&""!=a&&(e.getElementById(u.inputId).value=a,v(e.getElementById("als-data")),"function"==typeof c&&c(g[t])):console.error('In json config "inputValue" put correct field name')},!1)})(),function(){for(var t=e.getElementsByClassName("als-p-lr"),a=0;a<t.length;a++)t[a].addEventListener("click",function(){var e=this.getAttribute("rel");d>i&&"right"==e?(s=((i+=1)-1)*u.itemsPerPage,p(u.data)):i>1&&"left"==e&&(s=((i-=1)-1)*u.itemsPerPage,p(u.data))},!1)}(),e.getElementById("als-close-btn").addEventListener("click",function(){v(e.getElementById("als-data"))}),e.addEventListener("click",function(t){"als-paging"!=t.target.id&&"als-th"!=t.target.id&&"als-ra"!=t.target.id&&"als-la"!=t.target.id&&"als-cp"!=t.target.id&&"als-page"!=t.target.id&&t.target.id!=u.inputId&&e.getElementById("als-data")&&v(e.getElementById("als-data"))})}(l)}else console.error("fields is empty. pass any field name to show in table")}function m(e,t){for(var a in t)e.style[a]=t[a]}function v(e){e.parentElement.removeChild(e)}}(document,window,screen);